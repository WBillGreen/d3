<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <title>3djs</title>
    <script src="./static/three/three.min.js"></script>
    <script src="./static/three/examples/js/controls/OrbitControls.js"></script>
    <script src="./static/three/examples/js/libs/stats.min.js"></script>
    <script src="./static/three/examples/js/libs/dat.gui.min.js"></script>
    <script src="./static/material.js"></script>
</head>
<body>
<div id="app"></div>
<script>
    var width = window.innerWidth;
    var height = window.innerHeight
    var scene = new THREE.Scene()
    var renderer = new THREE.WebGLRenderer({
        alpha: true
    })
    renderer.setPixelRatio(window.devicePixelRatio);
    renderer.setSize(width, height);
    document.querySelector('#app').appendChild(renderer.domElement)
    var camera = new THREE.PerspectiveCamera(45, width / height, 0.1, 50);
    camera.position.z = 30;
    var ambientLight = new THREE.AmbientLight();
    scene.add(ambientLight)
    var gui = new dat.GUI();
    guiScene(gui, scene, camera);

    var geometry = new THREE.TorusKnotGeometry(10, 3, 100, 16);
    var mesh = new THREE.Mesh(geometry);

    generateVertexColors(geometry);

    mesh.material = chooseFromHash(gui, mesh, geometry);

    generateMorphTargets(mesh, geometry);

    scene.add(mesh);
    var group = new THREE.Group();
    scene.add(group);
    group.add(new THREE.GridHelper(4, 12));
    var cubes = new THREE.Group();
    group.add(cubes);
    var prevFog = false;
    var render = function () {
        requestAnimationFrame(render);

        var time = Date.now() * 0.001;

        mesh.rotation.x += 0.005;
        mesh.rotation.y += 0.005;

        if (prevFog !== scene.fog) {

            mesh.material.needsUpdate = true;
            prevFog = scene.fog;

        }

        if (mesh.morphTargetInfluences) {

            mesh.morphTargetInfluences[0] = (1 + Math.sin(4 * time)) / 2;

        }

        renderer.render(scene, camera);

    };
    var Orbit = new THREE.OrbitControls(camera,renderer.domElement)
    render()
</script>
<!-- built files will be auto injected -->
</body>
</html>
